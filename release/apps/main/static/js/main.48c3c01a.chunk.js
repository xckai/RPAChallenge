(this.webpackJsonpmain=this.webpackJsonpmain||[]).push([[0],{199:function(t,e,n){},200:function(t,e,n){},354:function(t,e,n){"use strict";n.r(e);var i=n(7),s=n(0),a=n.n(s),c=n(26),o=n.n(c),r=(n(199),n(54)),l=n(55),d=n(59),h=n(58),u=(n(200),n(73)),j=n(48),p=n(37),b=n(187),g=n(356),f=n(111),x=n(45),m=n(89),O=n.n(m),y=n(176),v=n.n(y),w="".concat(window.location.protocol,"//").concat(window.location.host),k={authority:"https://auth.bottime.com",client_id:"encoo_RPAChallenge",redirect_uri:"".concat(w,"/main/login_success"),response_type:"code",scope:"openid profile offline_access rpa_challenge",post_logout_redirect_uri:"".concat(w,"/main/login")},C=new v.a.UserManager(k);function I(){return C.signinRedirect()}function D(){return C.signoutRedirect()}window.oidcManager=C,O.a.interceptors.response.use((function(t){return t}),(function(t){return 401==t.response.status&&(window.location.href="/main/login"),t}));var T=g.a.Header,S=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(r.a)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))).state={userName:"\u672a\u767b\u5f55",isLogin:!1},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;C.getUser().then((function(e){var n;e?t.setState({isLogin:!0,userName:null!==(n=null===e||void 0===e?void 0:e.profile.name)&&void 0!==n?n:"--"}):t.setState({isLogin:!1})}))}},{key:"render",value:function(){var t;return Object(i.jsxs)(T,{className:"header",title:"RPA Challenge",children:[Object(i.jsx)("div",{children:Object(i.jsx)("strong",{children:"RPA Challenge"})}),Object(i.jsx)("div",{className:"mid-title",children:null===(t=this.props)||void 0===t?void 0:t.title}),Object(i.jsx)("div",{className:"user-info",children:this.state.isLogin?Object(i.jsx)(f.a,{overlay:Object(i.jsx)(x.a,{children:Object(i.jsx)(x.a.Item,{children:Object(i.jsx)("a",{target:"_blank",rel:"noopener noreferrer",onClick:D,children:"\u6ce8\u9500"})})}),placement:"bottomLeft",children:Object(i.jsx)("a",{style:{color:"#eee"},children:this.state.userName})}):Object(i.jsx)(p.a,{type:"ghost",onClick:I,children:"\u70b9\u51fb\u767b\u5f55"})})]})}}]),n}(s.PureComponent),B=n(32),P=n.n(B),R=n(363);function _(){return Object(i.jsxs)(P.a,{style:{height:"100%",background:"rgb(255,255,255)"},children:[Object(i.jsx)(S,{title:""}),Object(i.jsx)(B.Content,{style:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#000"},children:Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%",position:"relative"},className:"bg",children:Object(i.jsxs)("section",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Object(i.jsx)("div",{className:"logo-login",style:{width:"300px",height:"100px"}}),Object(i.jsx)(p.a,{type:"ghost",size:"large",icon:Object(i.jsx)(R.a,{}),onClick:function(){I().catch((function(t){return b.b.error(t.message)}))},children:"\u70b9\u51fb\u767b\u5f55"})]})})})]})}var L=n(361),N=n(362),F=n(358),M=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(r.a)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))).state={topics:[],isBusy:!0},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;O.a.get("/api/rpaexaminfo/getuserrpaexamlist",{params:{pageIndex:1,pageSize:1e3}}).then((function(e){var n,i,s;return t.setState({topics:null!==(n=null===(i=e.data)||void 0===i||null===(s=i.response)||void 0===s?void 0:s.data)&&void 0!==n?n:[],isBusy:!1})})).catch((function(t){b.b.error("\u83b7\u53d6\u5217\u8868\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u5237\u65b0\u91cd\u8bd5! (".concat(t.message,")"))}))}},{key:"renderList",value:function(){var t=[{title:" ",width:"4%",render:function(t,e,n){return Object(i.jsx)("span",{children:n+1})}},{title:"\u9898\u76ee\u540d\u79f0",dataIndex:"Title",key:"Title",render:function(t){return Object(i.jsx)("span",{children:t})}},{title:"\u662f\u5426\u5df2\u901a\u8fc7",dataIndex:"IsPassed",key:"IsPassed",render:function(t){return t?Object(i.jsx)(L.a,{color:"green",children:"\u5df2\u901a\u8fc7"}):Object(i.jsx)(L.a,{color:"red",children:"\u672a\u901a\u8fc7"})}},{title:"\u8017\u65f6",dataIndex:"TimeCost",key:"TimeCost",render:function(t,e){var n;return e.IsPassed?Object(i.jsxs)("span",{children:[(null!==(n=e.TimeCost)&&void 0!==n?n:0)/1e3,"s"]}):"--"}},{title:"\u6392\u540d",dataIndex:"Rank",key:"Rank",render:function(t,e){return e.IsPassed?Object(i.jsx)("span",{children:t}):"--"}},{title:"",dataIndex:"Id",key:"Id",render:function(t){return Object(i.jsx)(N.b,{size:"middle",children:Object(i.jsx)(p.a,{type:"ghost",onClick:function(){window.location.href="/main/topicdetail/".concat(t)},children:Object(i.jsx)("span",{children:"\u8fdb\u5165\u6d4b\u8bd5"})})})}}];return Object(i.jsx)(F.a,{style:{width:"80%"},columns:t,dataSource:this.state.topics,loading:this.state.isBusy})}},{key:"render",value:function(){return Object(i.jsxs)(P.a,{style:{height:"100%",background:"rgb(255,255,255)"},children:[Object(i.jsx)(S,{title:"\u9898\u76ee\u5217\u8868"}),Object(i.jsx)(B.Content,{style:{display:"flex",justifyContent:"center"},children:this.renderList()})]})}}]),n}(a.a.PureComponent),A=n(141),H=n(360),U=n(359),J=n(357),z=n(100),E=n(183),V=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(r.a)(this,n);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).state={isTestBegin:!1,showDetail:!0,topicDetail:{},isBusy:!0},t.frameRef=a.a.createRef(),t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t,e,n,i,s=this,a=null===(t=this.props)||void 0===t||null===(e=t.match)||void 0===e||null===(n=e.params)||void 0===n?void 0:n.id;""!==a&&void 0!==a?(this.setState({id:a}),(i=a,O.a.get("/api/rpaexaminfo/getrpaexamdetailinfo",{params:{testId:i}})).then((function(t){var e=t.data.response,n=e.URL.split("/")[1];s.setState({topicDetail:Object(A.a)(Object(A.a)({},e),{},{Name:n}),isBusy:!1})})).catch((function(t){b.b.error("\u8bfb\u53d6\u5f53\u524d\u6d4b\u8bd5\u4fe1\u606f\u9519\u8bef\uff0c\u8bf7\u9000\u51fa\u540e\u91cd\u8bd5\uff01(".concat(t.message,")"))}))):b.b.error("\u65e0\u6cd5\u8bfb\u53d6\u5f53\u524d\u8003\u8bd5\u4fe1\u606fID\uff0c\u8bf7\u9000\u51fa\u540e\u91cd\u8bd5!")}},{key:"onBeginTestBtn",value:function(){var t,e,n=this;(e=null!==(t=this.state.topicDetail.Id)&&void 0!==t?t:"",O.a.post("/api/rpachallenge/challengestart?testId=".concat(e),{testId:e})).then((function(){n.setState({isTestBegin:!0,showDetail:!1})})).catch((function(t){b.b.error("\u65e0\u6cd5\u542f\u52a8\u6d4b\u8bd5\uff0c\u8bf7\u9000\u51fa\u540e\u91cd\u8bd5\uff01(".concat(t.message,")"))}))}},{key:"onSwitchViewBtn",value:function(){this.setState({showDetail:!this.state.showDetail})}},{key:"onSubmitBtn",value:function(){var t=this;H.a.confirm({title:"\u8bf7\u786e\u8ba4",icon:Object(i.jsx)(z.a,{}),content:"\u786e\u8ba4\u63d0\u4ea4\u672c\u6b21\u6d4b\u8bd5\u7ed3\u679c?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){try{var e;(null===(e=t.frameRef.current)||void 0===e?void 0:e.contentWindow).getExamResult().then((function(e){var n,s;console&&console.log(e),(s={data:e,appName:t.state.topicDetail.Name||"",testId:null!==(n=t.state.topicDetail.Id)&&void 0!==n?n:""},O.a.post("/submit",s)).then((function(t){var e,n;t.data.isPassed?H.a.success({title:"\u901a\u8fc7\u6d4b\u8bd5",content:Object(i.jsx)("div",{children:Object(i.jsxs)("div",{children:["\u7528\u65f6\uff1a",Object(i.jsx)("span",{style:{fontWeight:"bold"},children:null!==(e=t.data.timeout)&&void 0!==e?e:"--"})," ms"]})}),onOk:function(){window.location.href="/main/index.html"}}):b.b.error(null!==(n=t.data.result)&&void 0!==n?n:"\u672a\u901a\u8fc7\u6821\u9a8c\uff0c\u8bf7\u68c0\u67e5\u4fee\u6539\u540e\u91cd\u65b0\u63d0\u4ea4\uff01")})).catch((function(t){console&&console.error(t),b.b.error(t.message)}))})).catch((function(t){console&&console.error(t),b.b.error(t)}))}catch(n){console&&console.error(JSON.stringify(n.message)),b.b.error(JSON.stringify(n.message))}}})}},{key:"renderTestPage",value:function(){var t,e;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(B.Content,{style:{position:"relative"},children:[Object(i.jsx)("iframe",{src:this.state.topicDetail.URL,height:"100%",width:"100%",ref:this.frameRef}),Object(i.jsxs)("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,visibility:this.state.showDetail?"initial":"hidden",background:"#fff"},children:[Object(i.jsx)(U.a,{title:(null===(t=this.state.topicDetail)||void 0===t?void 0:t.Title)+(null!==(e=this.state.topicDetail.Id)&&void 0!==e?e:"")}),Object(i.jsx)(J.a,{style:{margin:"0 0 10px 0"}}),Object(i.jsx)("div",{style:{padding:"0 10px 20px 10px"},dangerouslySetInnerHTML:{__html:this.state.topicDetail.IntroductionHTMLStr||""}})]})]})})}},{key:"renderDetailPage",value:function(){var t;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(B.Content,{children:[Object(i.jsx)(U.a,{title:null===(t=this.state.topicDetail)||void 0===t?void 0:t.Title}),Object(i.jsx)(J.a,{style:{margin:"0 0 10px 0"}}),Object(i.jsx)("div",{style:{padding:"0 10px 20px 10px"},dangerouslySetInnerHTML:{__html:this.state.topicDetail.IntroductionHTMLStr||""}})]})})}},{key:"renderFooder",value:function(){return this.state.isTestBegin?Object(i.jsxs)(B.Footer,{style:{padding:"8px 50px 5px 50px"},children:[Object(i.jsx)(p.a,{style:{float:"right"},type:"primary",danger:!0,onClick:this.onSubmitBtn.bind(this),children:"\u63d0\u4ea4"}),Object(i.jsx)(p.a,{style:{float:"right",marginLeft:10,marginRight:10},type:"ghost",onClick:this.onSwitchViewBtn.bind(this),children:"\u5207\u6362\u89c6\u56fe"})]}):Object(i.jsx)(B.Footer,{style:{padding:"8px 50px 5px 50px"},children:Object(i.jsx)(p.a,{style:{float:"right"},type:"primary",onClick:this.onBeginTestBtn.bind(this),children:"\u5f00\u59cb\u6d4b\u8bd5"})})}},{key:"render",value:function(){var t;return Object(i.jsxs)(g.a,{style:{height:"100%",width:"100%",background:"rgb(255,255,255)"},children:[Object(i.jsx)(S,{title:this.state.isTestBegin&&!this.state.showDetail?null!==(t=this.state.topicDetail.Title)&&void 0!==t?t:"":"\u8be6\u60c5"}),this.state.isBusy&&Object(i.jsx)(E.a,{tip:"\u52a0\u8f7d\u4e2d..."}),this.state.isTestBegin?this.renderTestPage():this.renderDetailPage(),this.renderFooder()]})}}]),n}(s.PureComponent);function W(){return Object(s.useEffect)((function(){C.signinRedirectCallback().then((function(t){window.location.href="/main/index.html"})).catch((function(t){return b.b.error(t.message)}))})),Object(i.jsx)(P.a,{style:{height:"100%",background:"rgb(255,255,255)"},children:Object(i.jsxs)(E.a,{tip:"\u6b63\u5728\u767b\u5f55...",style:{height:"100vh"},children:[Object(i.jsx)(S,{title:""}),Object(i.jsx)(B.Content,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"95vh"},children:Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%",position:"relative"},className:"bg",children:Object(i.jsx)("section",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(i.jsx)("div",{className:"logo-login",style:{width:"400px",height:"150px",marginRight:10}})})})})]})})}var q=Object(j.a)(),G=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"setTitle",value:function(t){this.setState({title:t})}},{key:"render",value:function(){return Object(i.jsxs)(u.b,{history:q,children:[Object(i.jsx)(u.a,{path:"/main",exact:!0,component:M}),Object(i.jsx)(u.a,{path:"/main/index.html",exact:!0,component:M}),Object(i.jsx)(u.a,{path:"/main/login",component:_}),Object(i.jsx)(u.a,{path:"/main/login_success",component:W}),Object(i.jsx)(u.a,{path:"/main/topicdetail/:id",component:V})]})}}]),n}(a.a.Component),K=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,364)).then((function(e){var n=e.getCLS,i=e.getFID,s=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),i(t),s(t),a(t),c(t)}))};o.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(G,{})}),document.getElementById("root")),C.getUser().then((function(t){t||-1!=window.location.pathname.indexOf("/main/login")&&-1!=window.location.pathname.indexOf("/main/login_success")&&(window.location.href="/main/login")})),K()}},[[354,1,2]]]);
//# sourceMappingURL=main.48c3c01a.chunk.js.map