{"version":3,"sources":["service.ts","components/Bar.tsx","pages/Login.tsx","pages/Main.tsx","pages/TopicDetail.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["hostPrefix","window","location","protocol","host","config","authority","client_id","redirect_uri","response_type","scope","post_logout_redirect_uri","oidcManager","Oidc","UserManager","axios","interceptors","response","use","resp","err","status","href","signinRedirect","Header","Layout","menu","Item","target","rel","onClick","signoutRedirect","Bar","props","useState","userName","setUserName","useEffect","getUser","then","user","Promise","resolve","profile","name","catch","message","error","className","title","overlay","placement","style","color","layout","labelCol","span","wrapperCol","tailLayout","offset","Login","setName","passwd","setPassWd","height","background","display","justifyContent","alignItems","width","maxWidth","label","rules","required","placeholder","prefix","UserOutlined","value","onChange","e","Password","KeyOutlined","type","htmlType","post","account","pass","login","data","success","msg","MainPage","state","topics","isBusy","get","params","pageIndex","pageSize","setState","columns","render","obj","record","idx","dataIndex","key","text","passed","timeCost","recoder","IsPassed","TimeCost","rank","id","size","dataSource","this","loading","renderList","React","PureComponent","TopicInfo","isTestBegin","showDetail","topicDetail","frameRef","createRef","testId","match","undefined","URL","split","Name","Id","Modal","confirm","icon","ExclamationCircleOutlined","content","okText","cancelText","onOk","current","contentWindow","getExamResult","postData","console","log","appName","res","isPassed","fontWeight","timeout","result","ex","JSON","stringify","position","src","ref","left","right","top","bottom","visibility","Title","margin","padding","dangerouslySetInnerHTML","__html","IntroductionHTMLStr","float","danger","onSubmitBtn","bind","marginLeft","marginRight","onSwitchViewBtn","onBeginTestBtn","tip","renderTestPage","renderDetailPage","renderFooder","history","createBrowserHistory","App","path","exact","component","Component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ee7ca3c4.chunk.js","sourcesContent":["import { default as axios } from 'axios';\r\nimport Oidc from 'oidc-client';\r\n\r\ninterface ICommonResp<T> {\r\n  status: Number;\r\n  success: Boolean;\r\n  msg: String;\r\n  response: T;\r\n}\r\nconst hostPrefix = `${window.location.protocol}//${window.location.host}`;\r\nconst config = {\r\n  authority: 'https://auth.bottime.com',\r\n  client_id: 'encoo_RPAChallenge',\r\n  redirect_uri: `${hostPrefix}/main/index.html`,\r\n  response_type: 'code',\r\n  scope: 'openid profile offline_access rpa_challenge',\r\n  post_logout_redirect_uri: `${hostPrefix}/main/logout`\r\n};\r\nconst oidcManager = new Oidc.UserManager(config);\r\n\r\naxios.interceptors.response.use(\r\n  (resp) => resp,\r\n  (err) => {\r\n    if (err.response.status == 401) {\r\n      window.location.href=\"/main/index.html\";\r\n      oidcManager.signinRedirect();\r\n    }\r\n    return err;\r\n  }\r\n);\r\n\r\n\r\nexport function getUserInfo() {\r\n  return oidcManager.getUser().then(function (user) {\r\n    if (user) {\r\n      return Promise.resolve(user);\r\n    } else {\r\n      window.location.href=\"/main/index.html\";\r\n      oidcManager.signinRedirect();\r\n    }\r\n  });\r\n}\r\nexport function login(user: string, passwd: string) {\r\n  return axios.post<ICommonResp<string>>('/api/userlogin/login', {\r\n    account: user,\r\n    pass: passwd\r\n  });\r\n}\r\nexport function logout() {\r\n  return oidcManager.signoutRedirect();\r\n}\r\n/** 提交考试结果 */\r\nexport function submit(postData: { appName: string; data: any; testId: string }) {\r\n  return axios.post<{ isPassed: boolean; result?: string; timeout: string }>('/submit', postData);\r\n}\r\nexport function getUserExamList() {\r\n  return axios.get<\r\n    ICommonResp<{\r\n      Page: number;\r\n      PageCount: number;\r\n      DataCount: number;\r\n      PageSize: number;\r\n      data: Array<{\r\n        Id: number;\r\n        Title: string;\r\n        IntroductionHTMLStr: string;\r\n        URL: string;\r\n        TimeCost: number;\r\n        IsPassed: boolean;\r\n        Rank: number;\r\n      }>;\r\n    }>\r\n  >('/api/rpaexaminfo/getuserrpaexamlist', {\r\n    params: {\r\n      pageIndex: 1,\r\n      pageSize: 1000\r\n    }\r\n  });\r\n}\r\nexport function getDetail(testId: string) {\r\n  return axios.get<\r\n    ICommonResp<{\r\n      Id: number;\r\n      Title: string;\r\n      IntroductionHTMLStr: string;\r\n      URL: string;\r\n      TimeCost: number;\r\n      IsPassed: boolean;\r\n      Rank: number;\r\n    }>\r\n  >('/api/rpaexaminfo/getrpaexamdetailinfo', {\r\n    params: {\r\n      testId: testId\r\n    }\r\n  });\r\n}\r\nexport function challengeStart(id: string) {\r\n  return axios.post<ICommonResp<boolean>>(`/api/rpachallenge/challengestart?testId=${id}`, {\r\n    testId: id\r\n  });\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Layout, Menu, Dropdown, Button, Space, message } from 'antd';\r\nimport { getUserInfo, logout } from '../service';\r\nconst { Header } = Layout;\r\n\r\nconst menu = (\r\n  <Menu>\r\n    <Menu.Item>\r\n      <a target=\"_blank\" rel=\"noopener noreferrer\" onClick={logout}>\r\n        注销\r\n      </a>\r\n    </Menu.Item>\r\n  </Menu>\r\n);\r\n\r\nexport default function Bar(props: { title: string }) {\r\n  const [userName, setUserName] = useState('未登录');\r\n  useEffect(() => {\r\n    getUserInfo()\r\n      .then((user) => {\r\n        setUserName(user?.profile.name ?? '--');\r\n      })\r\n      .catch((err) => {\r\n        message.error('获取用户信息失败： ' + err.message);\r\n      });\r\n  });\r\n  return (\r\n    <Header className=\"header\" title=\"RPA Challenge\">\r\n      <div>\r\n        <strong>RPA Challenge</strong>\r\n      </div>\r\n      <div className=\"mid-title\">{props?.title}</div>\r\n      <div className=\"user-info\">\r\n        <Dropdown overlay={menu} placement=\"bottomLeft\">\r\n          <a style={{ color: '#eee' }}>{userName}</a>\r\n        </Dropdown>\r\n      </div>\r\n    </Header>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Button, Form, Input, message } from 'antd';\r\nimport { UserOutlined, KeyOutlined } from '@ant-design/icons';\r\nimport Bar from '../components/Bar';\r\nimport Layout, { Content } from 'antd/lib/layout/layout';\r\nimport { login } from '../service';\r\nconst layout = {\r\n  labelCol: { span: 6 },\r\n  wrapperCol: { span: 16 }\r\n};\r\nconst tailLayout = {\r\n  wrapperCol: { offset: 0, span: 24 }\r\n};\r\n\r\nexport default function Login() {\r\n  let [name, setName] = useState('');\r\n  let [passwd, setPassWd] = useState('');\r\n  return (\r\n    <Layout style={{ height: '90%', background: 'rgb(255,255,255)' }}>\r\n      <Bar title=\"\" />\r\n      <Content style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n        <Form {...layout} style={{ width: '50%', maxWidth: 500 }}>\r\n          <Form.Item label=\"Username\" name=\"username\" rules={[{ required: true, message: 'Please input your username!' }]}>\r\n            <Input placeholder=\"Username\" prefix={<UserOutlined />} value={name} onChange={(e) => setName(e.target.value)} />\r\n          </Form.Item>\r\n\r\n          <Form.Item label=\"Password\" name=\"Password\" rules={[{ required: true, message: 'Please input your password!' }]}>\r\n            <Input.Password placeholder=\"Password\" value={passwd} onChange={(e) => setPassWd(e.target.value)} prefix={<KeyOutlined />} />\r\n          </Form.Item>\r\n          <Form.Item {...tailLayout}>\r\n            <div style={{ display: 'flex', justifyContent: 'center', width: '100%' }}>\r\n              <Button\r\n                type=\"primary\"\r\n                htmlType=\"submit\"\r\n                onClick={() => {\r\n                  login(name, passwd)\r\n                    .then((resp) => {\r\n                      resp.data.success ? (window.location.href = '/main/index.html') : message.error(resp.data.msg);\r\n                    })\r\n                    .catch((err) => message.error(err.message));\r\n                }}\r\n              >\r\n                登录\r\n              </Button>\r\n            </div>\r\n          </Form.Item>\r\n        </Form>\r\n      </Content>\r\n    </Layout>\r\n  );\r\n}\r\n","import Layout, { Content } from 'antd/lib/layout/layout';\r\nimport React from 'react';\r\nimport Bar from '../components/Bar';\r\nimport { Button, message, Space, Table, Tag } from 'antd';\r\nimport { getUserExamList } from '../service';\r\n\r\ninterface ITopicModle {\r\n  /** 测试id */\r\n  Id: string;\r\n  /** 测试题目 */\r\n  Title: string;\r\n  /** 测试所在url */\r\n  URL: string;\r\n  /** 是否已通过测试 */\r\n  IsPassed: boolean;\r\n  /** 最佳用时 */\r\n  TimeCost?: number;\r\n  /** 耗时排名 */\r\n  Rank?: number;\r\n}\r\nexport class MainPage extends React.PureComponent {\r\n  state: {\r\n    topics: Array<ITopicModle>;\r\n    isBusy:boolean\r\n  } = {\r\n    topics: [],\r\n    isBusy: true\r\n  };\r\n  componentDidMount(){\r\n    getUserExamList().then(resp=>this.setState({\r\n      topics: resp.data?.response?.data??[],\r\n      isBusy: false\r\n    })).catch((err:any)=>{\r\n      message.error(`获取列表失败，请稍后刷新重试! (${err.message})`);\r\n    })\r\n  }\r\n  renderList() {\r\n    const columns = [\r\n      {\r\n        title: ' ',\r\n        width: '4%',\r\n        render: (obj: ITopicModle, record: ITopicModle, idx: number) => <span>{idx + 1}</span>\r\n      },\r\n      {\r\n        title: '题目名称',\r\n        dataIndex: 'Title',\r\n        key: 'Title',\r\n        render: (text: string) => <span>{text}</span>\r\n      },\r\n      {\r\n        title: '是否已通过',\r\n        dataIndex: 'IsPassed',\r\n        key: 'IsPassed',\r\n        render: (passed: boolean) => (passed ? <Tag color=\"green\">已通过</Tag> : <Tag color=\"red\">未通过</Tag>)\r\n      },\r\n      {\r\n        title: '耗时',\r\n        dataIndex: 'TimeCost',\r\n        key: 'TimeCost',\r\n        render: (timeCost: number, recoder: ITopicModle) => (recoder.IsPassed  ? <span>{(recoder.TimeCost??0) / 1000}s</span> : '--')\r\n      },\r\n      {\r\n        title: '排名',\r\n        dataIndex: 'Rank',\r\n        key: 'Rank',\r\n        render: (rank: number, recoder: ITopicModle) => (recoder.IsPassed ? <span>{rank}</span> : '--')\r\n      },\r\n      {\r\n        title: '',\r\n        dataIndex: 'Id',\r\n        key: 'Id',\r\n        render: (id: string) => (\r\n          <Space size=\"middle\">\r\n            <Button type=\"ghost\">\r\n              <a href={`/main/topicdetail/${id}`}>进入测试</a>\r\n            </Button>\r\n          </Space>\r\n        )\r\n      }\r\n    ];\r\n    return <Table style={{ width: '80%' }} columns={columns} dataSource={this.state.topics} loading={this.state.isBusy}/>;\r\n  }\r\n  render() {\r\n    return (\r\n      <Layout style={{ height: '100%', background: 'rgb(255,255,255)' }}>\r\n        <Bar title=\"题目列表\" />\r\n        <Content style={{ display: 'flex', justifyContent: 'center' }}>{this.renderList()}</Content>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n","import { Button, Divider, Layout, PageHeader, Modal, message } from 'antd';\r\nimport React, { PureComponent } from 'react';\r\nimport Bar from '../components/Bar';\r\nimport { Content, Footer } from 'antd/lib/layout/layout';\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\r\nimport { challengeStart, getDetail, submit } from '../service';\r\nimport { Spin } from 'antd';\r\n\r\ninterface IProps {\r\n  match: {\r\n    params: { id: string };\r\n  };\r\n}\r\ninterface IState {\r\n  isTestBegin: boolean;\r\n  showDetail: boolean;\r\n  topicDetail: ITopicDetail;\r\n  isBusy: boolean;\r\n}\r\ninterface ITopicDetail {\r\n  /** 测试ID */\r\n  Id?: string;\r\n  /** 测试名称 */\r\n  Title?: string;\r\n  /** 测试说明 */\r\n  IntroductionHTMLStr?: string;\r\n  /** 测试页面URL */\r\n  URL?: string;\r\n  Name?: string;\r\n}\r\nexport class TopicInfo extends PureComponent<Partial<IProps>> {\r\n  state: IState = {\r\n    isTestBegin: false,\r\n    showDetail: true,\r\n    topicDetail: {},\r\n    isBusy: true\r\n  };\r\n\r\n  frameRef = React.createRef<HTMLIFrameElement>();\r\n  componentDidMount() {\r\n    const id = this.props?.match?.params?.id;\r\n    if (id === '' || id === undefined) {\r\n      message.error('无法读取当前考试信息ID，请退出后重试!');\r\n      return;\r\n    }\r\n    this.setState({ id });\r\n    getDetail(id)\r\n      .then((resp) => {\r\n        let topicDetail = resp.data.response;\r\n        let name = topicDetail.URL.split('/')[1];\r\n        this.setState({\r\n          topicDetail: {\r\n            ...topicDetail,\r\n            Name: name\r\n          },\r\n          isBusy: false\r\n        });\r\n      })\r\n      .catch((err: any) => {\r\n        message.error(`读取当前测试信息错误，请退出后重试！(${err.message})`);\r\n      });\r\n  }\r\n  onBeginTestBtn() {\r\n    challengeStart(this.state.topicDetail.Id ?? '')\r\n      .then(() => {\r\n        this.setState({\r\n          isTestBegin: true,\r\n          showDetail: false\r\n        });\r\n      })\r\n      .catch((err: any) => {\r\n        message.error(`无法启动测试，请退出后重试！(${err.message})`);\r\n      });\r\n  }\r\n  onSwitchViewBtn() {\r\n    this.setState({\r\n      showDetail: !this.state.showDetail\r\n    });\r\n  }\r\n  onSubmitBtn() {\r\n    Modal.confirm({\r\n      title: '请确认',\r\n      icon: <ExclamationCircleOutlined />,\r\n      content: '确认提交本次测试结果?',\r\n      okText: '确认',\r\n      cancelText: '取消',\r\n      onOk: () => {\r\n        try {\r\n          let frameWin: any = this.frameRef.current?.contentWindow;\r\n          frameWin\r\n            .getExamResult()\r\n            .then((data: any) => {\r\n              console && console.log(data);\r\n              submit({\r\n                data: data,\r\n                appName: this.state.topicDetail.Name || '',\r\n                testId: this.state.topicDetail.Id ?? ''\r\n              })\r\n                .then((res) => {\r\n                  res.data.isPassed\r\n                    ? Modal.success({\r\n                        title: '通过测试',\r\n                        content: (\r\n                          <div>\r\n                            <div>\r\n                              用时：<span style={{ fontWeight: 'bold' }}>{res.data.timeout ?? '--'}</span> ms\r\n                            </div>\r\n                          </div>\r\n                        ),\r\n                        onOk() {\r\n                          (window.location as any).href = '/main/index.html';\r\n                        }\r\n                      })\r\n                    : message.error(res.data.result ?? '未通过校验，请检查修改后重新提交！');\r\n                })\r\n                .catch((err) => {\r\n                  console && console.error(err);\r\n                  message.error(err.message);\r\n                });\r\n            })\r\n            .catch((err: string) => {\r\n              console && console.error(err);\r\n              message.error(err);\r\n            });\r\n        } catch (ex) {\r\n          console && console.error(JSON.stringify(ex.message));\r\n          message.error(JSON.stringify(ex.message));\r\n        }\r\n      }\r\n    });\r\n  }\r\n  renderTestPage() {\r\n    return (\r\n      <>\r\n        <Content style={{ position: 'relative' }}>\r\n          <iframe src={this.state.topicDetail.URL} height=\"100%\" width=\"100%\" ref={this.frameRef}></iframe>\r\n          <div\r\n            style={{\r\n              position: 'absolute',\r\n              left: 0,\r\n              right: 0,\r\n              top: 0,\r\n              bottom: 0,\r\n              visibility: !this.state.showDetail ? 'hidden' : 'initial',\r\n              background: '#fff'\r\n            }}\r\n          >\r\n            <PageHeader title={this.state.topicDetail?.Title + (this.state.topicDetail.Id ?? '')} />\r\n            <Divider style={{ margin: '0 0 10px 0' }} />\r\n            <div\r\n              style={{ padding: '0 10px 20px 10px' }}\r\n              dangerouslySetInnerHTML={{ __html: this.state.topicDetail.IntroductionHTMLStr || '' }}\r\n            ></div>\r\n          </div>\r\n        </Content>\r\n      </>\r\n    );\r\n  }\r\n  renderDetailPage() {\r\n    return (\r\n      <>\r\n        <Content>\r\n          <PageHeader title={this.state.topicDetail?.Title} />\r\n          <Divider style={{ margin: '0 0 10px 0' }} />\r\n          <div\r\n            style={{ padding: '0 10px 20px 10px' }}\r\n            dangerouslySetInnerHTML={{ __html: this.state.topicDetail.IntroductionHTMLStr || '' }}\r\n          ></div>\r\n        </Content>\r\n      </>\r\n    );\r\n  }\r\n  renderFooder() {\r\n    return this.state.isTestBegin ? (\r\n      <Footer style={{ padding: '8px 50px 5px 50px' }}>\r\n        <Button style={{ float: 'right' }} type=\"primary\" danger onClick={this.onSubmitBtn.bind(this)}>\r\n          提交\r\n        </Button>\r\n        <Button style={{ float: 'right', marginLeft: 10, marginRight: 10 }} type=\"ghost\" onClick={this.onSwitchViewBtn.bind(this)}>\r\n          切换视图\r\n        </Button>\r\n      </Footer>\r\n    ) : (\r\n      <Footer style={{ padding: '8px 50px 5px 50px' }}>\r\n        <Button style={{ float: 'right' }} type=\"primary\" onClick={this.onBeginTestBtn.bind(this)}>\r\n          开始测试\r\n        </Button>\r\n      </Footer>\r\n    );\r\n  }\r\n  render() {\r\n    return (\r\n      <Layout style={{ height: '100%', width: '100%', background: 'rgb(255,255,255)' }}>\r\n        <Bar title={this.state.isTestBegin && !this.state.showDetail ? this.state.topicDetail.Title ?? '' : '详情'} />\r\n        {this.state.isBusy && <Spin tip=\"加载中...\" />}\r\n        {this.state.isTestBegin ? this.renderTestPage() : this.renderDetailPage()}\r\n        {this.renderFooder()}\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n","import React, { useState } from 'react';\nimport './App.less';\nimport { Router, Route } from 'react-router';\nimport { createBrowserHistory } from 'history';\nimport Login from './pages/Login';\nimport { MainPage } from './pages/Main';\nimport { TopicInfo } from './pages/TopicDetail';\nconst history = createBrowserHistory();\nclass App extends React.Component<{}, { title: string }> {\n  setTitle(title: string) {\n    this.setState({\n      title: title\n    });\n  }\n  render() {\n    return (\n      <Router history={history}>\n         <Route path=\"/main\" exact component={MainPage} />\n        <Route path=\"/main/index.html\" exact component={MainPage} />\n        <Route path=\"/main/login\" component={Login} />\n        <Route path=\"/main/topicdetail/:id\" component={TopicInfo} />\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}