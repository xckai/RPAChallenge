(this.webpackJsonpmain=this.webpackJsonpmain||[]).push([[0],{206:function(e,t,n){},207:function(e,t,n){},361:function(e,t,n){"use strict";n.r(t);var i=n(7),a=n(0),s=n.n(a),r=n(27),c=n.n(r),o=(n(206),n(80)),l=n(81),d=n(92),u=n(89),h=(n(207),n(95)),j=n(52),p=n(67),b=n(103),f=n(366),x=n(368),m=n(37),g=n(194),O=n(372),v=n(373),y=n(363),w=n(49),k=n(121),C=n(75),I=n.n(C),T=n(184),D=n.n(T),P="".concat(window.location.protocol,"//").concat(window.location.host),S={authority:"https://auth.bottime.com",client_id:"encoo_RPAChallenge",redirect_uri:"".concat(P,"/main/index.html"),response_type:"code",scope:"openid profile offline_access rpa_challenge",post_logout_redirect_uri:"".concat(P,"/main/logout")},B=new D.a.UserManager(S);window.oidcManager=B,I.a.interceptors.response.use((function(e){return e}),(function(e){return 401==e.response.status&&B.signinRedirect().then((function(){B.signinRedirectCallback(window.location.href).then((function(e){}))})),e}));var R=y.a.Header,_=Object(i.jsx)(w.a,{children:Object(i.jsx)(w.a.Item,{children:Object(i.jsx)("a",{target:"_blank",rel:"noopener noreferrer",onClick:function(){return B.signoutRedirect()},children:"\u6ce8\u9500"})})});function L(e){var t=Object(a.useState)("\u672a\u767b\u5f55"),n=Object(b.a)(t,2),s=n[0],r=n[1];return Object(a.useEffect)((function(){(window.currentUser?Promise.resolve(window.currentUser):B.getUser().then((function(e){if(e)return window.currentUser=e,Promise.resolve(e);B.signinRedirect().then((function(){B.signinRedirectCallback(window.location.href).then((function(e){}))}))}))).then((function(e){var t;r(null!==(t=null===e||void 0===e?void 0:e.profile.name)&&void 0!==t?t:"--")})).catch((function(e){g.b.error("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25\uff1a "+e.message)}))}),[]),Object(i.jsxs)(R,{className:"header",title:"RPA Challenge",children:[Object(i.jsx)("div",{children:Object(i.jsx)("strong",{children:"RPA Challenge"})}),Object(i.jsx)("div",{className:"mid-title",children:null===e||void 0===e?void 0:e.title}),Object(i.jsx)("div",{className:"user-info",children:Object(i.jsx)(k.a,{overlay:_,placement:"bottomLeft",children:Object(i.jsx)("a",{style:{color:"#eee"},children:s})})})]})}var F=n(45),M=n.n(F),U={labelCol:{span:6},wrapperCol:{span:16}},N={wrapperCol:{offset:0,span:24}};function A(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(""),c=Object(b.a)(r,2),o=c[0],l=c[1];return Object(i.jsxs)(M.a,{style:{height:"90%",background:"rgb(255,255,255)"},children:[Object(i.jsx)(L,{title:""}),Object(i.jsx)(F.Content,{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(i.jsxs)(f.a,Object(p.a)(Object(p.a)({},U),{},{style:{width:"50%",maxWidth:500},children:[Object(i.jsx)(f.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(i.jsx)(x.a,{placeholder:"Username",prefix:Object(i.jsx)(O.a,{}),value:n,onChange:function(e){return s(e.target.value)}})}),Object(i.jsx)(f.a.Item,{label:"Password",name:"Password",rules:[{required:!0,message:"Please input your password!"}],children:Object(i.jsx)(x.a.Password,{placeholder:"Password",value:o,onChange:function(e){return l(e.target.value)},prefix:Object(i.jsx)(v.a,{})})}),Object(i.jsx)(f.a.Item,Object(p.a)(Object(p.a)({},N),{},{children:Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:Object(i.jsx)(m.a,{type:"primary",htmlType:"submit",onClick:function(){(function(e,t){return I.a.post("/api/userlogin/login",{account:e,pass:t})})(n,o).then((function(e){e.data.success?window.location.href="/main/index.html":g.b.error(e.data.msg)})).catch((function(e){return g.b.error(e.message)}))},children:"\u767b\u5f55"})})}))]}))})]})}var H=n(370),J=n(371),E=n(365),W=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={topics:[],isBusy:!0},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;I.a.get("/api/rpaexaminfo/getuserrpaexamlist",{params:{pageIndex:1,pageSize:1e3}}).then((function(t){var n,i,a;return e.setState({topics:null!==(n=null===(i=t.data)||void 0===i||null===(a=i.response)||void 0===a?void 0:a.data)&&void 0!==n?n:[],isBusy:!1})})).catch((function(e){g.b.error("\u83b7\u53d6\u5217\u8868\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u5237\u65b0\u91cd\u8bd5! (".concat(e.message,")"))}))}},{key:"renderList",value:function(){var e=[{title:" ",width:"4%",render:function(e,t,n){return Object(i.jsx)("span",{children:n+1})}},{title:"\u9898\u76ee\u540d\u79f0",dataIndex:"Title",key:"Title",render:function(e){return Object(i.jsx)("span",{children:e})}},{title:"\u662f\u5426\u5df2\u901a\u8fc7",dataIndex:"IsPassed",key:"IsPassed",render:function(e){return e?Object(i.jsx)(H.a,{color:"green",children:"\u5df2\u901a\u8fc7"}):Object(i.jsx)(H.a,{color:"red",children:"\u672a\u901a\u8fc7"})}},{title:"\u8017\u65f6",dataIndex:"TimeCost",key:"TimeCost",render:function(e,t){var n;return t.IsPassed?Object(i.jsxs)("span",{children:[(null!==(n=t.TimeCost)&&void 0!==n?n:0)/1e3,"s"]}):"--"}},{title:"\u6392\u540d",dataIndex:"Rank",key:"Rank",render:function(e,t){return t.IsPassed?Object(i.jsx)("span",{children:e}):"--"}},{title:"",dataIndex:"Id",key:"Id",render:function(e){return Object(i.jsx)(J.b,{size:"middle",children:Object(i.jsx)(m.a,{type:"ghost",onClick:function(){window.location.href="/main/topicdetail/".concat(e)},children:Object(i.jsx)("span",{children:"\u8fdb\u5165\u6d4b\u8bd5"})})})}}];return Object(i.jsx)(E.a,{style:{width:"80%"},columns:e,dataSource:this.state.topics,loading:this.state.isBusy})}},{key:"render",value:function(){return Object(i.jsxs)(M.a,{style:{height:"100%",background:"rgb(255,255,255)"},children:[Object(i.jsx)(L,{title:"\u9898\u76ee\u5217\u8868"}),Object(i.jsx)(F.Content,{style:{display:"flex",justifyContent:"center"},children:this.renderList()})]})}}]),n}(s.a.PureComponent),q=n(369),z=n(367),V=n(364),G=n(105),K=n(189),Q=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={isTestBegin:!1,showDetail:!0,topicDetail:{},isBusy:!0},e.frameRef=s.a.createRef(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t,n,i,a=this,s=null===(e=this.props)||void 0===e||null===(t=e.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id;""!==s&&void 0!==s?(this.setState({id:s}),(i=s,I.a.get("/api/rpaexaminfo/getrpaexamdetailinfo",{params:{testId:i}})).then((function(e){var t=e.data.response,n=t.URL.split("/")[1];a.setState({topicDetail:Object(p.a)(Object(p.a)({},t),{},{Name:n}),isBusy:!1})})).catch((function(e){g.b.error("\u8bfb\u53d6\u5f53\u524d\u6d4b\u8bd5\u4fe1\u606f\u9519\u8bef\uff0c\u8bf7\u9000\u51fa\u540e\u91cd\u8bd5\uff01(".concat(e.message,")"))}))):g.b.error("\u65e0\u6cd5\u8bfb\u53d6\u5f53\u524d\u8003\u8bd5\u4fe1\u606fID\uff0c\u8bf7\u9000\u51fa\u540e\u91cd\u8bd5!")}},{key:"onBeginTestBtn",value:function(){var e,t,n=this;(t=null!==(e=this.state.topicDetail.Id)&&void 0!==e?e:"",I.a.post("/api/rpachallenge/challengestart?testId=".concat(t),{testId:t})).then((function(){n.setState({isTestBegin:!0,showDetail:!1})})).catch((function(e){g.b.error("\u65e0\u6cd5\u542f\u52a8\u6d4b\u8bd5\uff0c\u8bf7\u9000\u51fa\u540e\u91cd\u8bd5\uff01(".concat(e.message,")"))}))}},{key:"onSwitchViewBtn",value:function(){this.setState({showDetail:!this.state.showDetail})}},{key:"onSubmitBtn",value:function(){var e=this;q.a.confirm({title:"\u8bf7\u786e\u8ba4",icon:Object(i.jsx)(G.a,{}),content:"\u786e\u8ba4\u63d0\u4ea4\u672c\u6b21\u6d4b\u8bd5\u7ed3\u679c?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){try{var t;(null===(t=e.frameRef.current)||void 0===t?void 0:t.contentWindow).getExamResult().then((function(t){var n,a;console&&console.log(t),(a={data:t,appName:e.state.topicDetail.Name||"",testId:null!==(n=e.state.topicDetail.Id)&&void 0!==n?n:""},I.a.post("/submit",a)).then((function(e){var t,n;e.data.isPassed?q.a.success({title:"\u901a\u8fc7\u6d4b\u8bd5",content:Object(i.jsx)("div",{children:Object(i.jsxs)("div",{children:["\u7528\u65f6\uff1a",Object(i.jsx)("span",{style:{fontWeight:"bold"},children:null!==(t=e.data.timeout)&&void 0!==t?t:"--"})," ms"]})}),onOk:function(){window.location.href="/main/index.html"}}):g.b.error(null!==(n=e.data.result)&&void 0!==n?n:"\u672a\u901a\u8fc7\u6821\u9a8c\uff0c\u8bf7\u68c0\u67e5\u4fee\u6539\u540e\u91cd\u65b0\u63d0\u4ea4\uff01")})).catch((function(e){console&&console.error(e),g.b.error(e.message)}))})).catch((function(e){console&&console.error(e),g.b.error(e)}))}catch(n){console&&console.error(JSON.stringify(n.message)),g.b.error(JSON.stringify(n.message))}}})}},{key:"renderTestPage",value:function(){var e,t;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(F.Content,{style:{position:"relative"},children:[Object(i.jsx)("iframe",{src:this.state.topicDetail.URL,height:"100%",width:"100%",ref:this.frameRef}),Object(i.jsxs)("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,visibility:this.state.showDetail?"initial":"hidden",background:"#fff"},children:[Object(i.jsx)(z.a,{title:(null===(e=this.state.topicDetail)||void 0===e?void 0:e.Title)+(null!==(t=this.state.topicDetail.Id)&&void 0!==t?t:"")}),Object(i.jsx)(V.a,{style:{margin:"0 0 10px 0"}}),Object(i.jsx)("div",{style:{padding:"0 10px 20px 10px"},dangerouslySetInnerHTML:{__html:this.state.topicDetail.IntroductionHTMLStr||""}})]})]})})}},{key:"renderDetailPage",value:function(){var e;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(F.Content,{children:[Object(i.jsx)(z.a,{title:null===(e=this.state.topicDetail)||void 0===e?void 0:e.Title}),Object(i.jsx)(V.a,{style:{margin:"0 0 10px 0"}}),Object(i.jsx)("div",{style:{padding:"0 10px 20px 10px"},dangerouslySetInnerHTML:{__html:this.state.topicDetail.IntroductionHTMLStr||""}})]})})}},{key:"renderFooder",value:function(){return this.state.isTestBegin?Object(i.jsxs)(F.Footer,{style:{padding:"8px 50px 5px 50px"},children:[Object(i.jsx)(m.a,{style:{float:"right"},type:"primary",danger:!0,onClick:this.onSubmitBtn.bind(this),children:"\u63d0\u4ea4"}),Object(i.jsx)(m.a,{style:{float:"right",marginLeft:10,marginRight:10},type:"ghost",onClick:this.onSwitchViewBtn.bind(this),children:"\u5207\u6362\u89c6\u56fe"})]}):Object(i.jsx)(F.Footer,{style:{padding:"8px 50px 5px 50px"},children:Object(i.jsx)(m.a,{style:{float:"right"},type:"primary",onClick:this.onBeginTestBtn.bind(this),children:"\u5f00\u59cb\u6d4b\u8bd5"})})}},{key:"render",value:function(){var e;return Object(i.jsxs)(y.a,{style:{height:"100%",width:"100%",background:"rgb(255,255,255)"},children:[Object(i.jsx)(L,{title:this.state.isTestBegin&&!this.state.showDetail?null!==(e=this.state.topicDetail.Title)&&void 0!==e?e:"":"\u8be6\u60c5"}),this.state.isBusy&&Object(i.jsx)(K.a,{tip:"\u52a0\u8f7d\u4e2d..."}),this.state.isTestBegin?this.renderTestPage():this.renderDetailPage(),this.renderFooder()]})}}]),n}(a.PureComponent),X=Object(j.a)(),Y=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"setTitle",value:function(e){this.setState({title:e})}},{key:"render",value:function(){return Object(i.jsxs)(h.b,{history:X,children:[Object(i.jsx)(h.a,{path:"/main",exact:!0,component:W}),Object(i.jsx)(h.a,{path:"/main/index.html",exact:!0,component:W}),Object(i.jsx)(h.a,{path:"/main/login",component:A}),Object(i.jsx)(h.a,{path:"/main/topicdetail/:id",component:Q})]})}}]),n}(s.a.Component),Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,374)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),s(e),r(e)}))};c.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(Y,{})}),document.getElementById("root")),Z()}},[[361,1,2]]]);
//# sourceMappingURL=main.bd7504da.chunk.js.map