(this.webpackJsonpmain=this.webpackJsonpmain||[]).push([[0],{199:function(e,t,n){},200:function(e,t,n){},354:function(e,t,n){"use strict";n.r(t);var i=n(7),a=n(0),s=n.n(a),c=n(26),r=n.n(c),o=(n(199),n(54)),l=n(55),d=n(59),h=n(58),u=(n(200),n(74)),j=n(48),p=n(37),b=n(187),f=n(356),g=n(111),x=n(45),m=n(73),O=n.n(m),y=n(176),v=n.n(y),w="".concat(window.location.protocol,"//").concat(window.location.host),k={authority:"https://auth.bottime.com",client_id:"encoo_RPAChallenge",redirect_uri:"".concat(w,"/main/login_success"),response_type:"code",scope:"openid profile offline_access rpa_challenge",post_logout_redirect_uri:"".concat(w,"/main/login")},C=new v.a.UserManager(k),I="";function D(){return C.signinRedirect()}function T(){return C.clearStaleState(),C.removeUser(),!0}function S(){return C.signoutRedirect().then(T)}window.oidcManager=C,O.a.interceptors.response.use((function(e){return e}),(function(e){return 401==e.response.status&&(window.location.href="/main/login"),e})),O.a.interceptors.request.use((function(e){return e.headers.common.Authorization=I,e}));var B=f.a.Header,_=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={userName:"\u672a\u767b\u5f55",isLogin:!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;C.getUser().then((function(t){var n;t?e.setState({isLogin:!0,userName:null!==(n=null===t||void 0===t?void 0:t.profile.name)&&void 0!==n?n:"--"}):e.setState({isLogin:!1})}))}},{key:"render",value:function(){var e;return Object(i.jsxs)(B,{className:"header",title:"RPA Challenge",children:[Object(i.jsx)("div",{children:Object(i.jsx)("strong",{children:"RPA Challenge"})}),Object(i.jsx)("div",{className:"mid-title",children:null===(e=this.props)||void 0===e?void 0:e.title}),Object(i.jsx)("div",{className:"user-info",children:this.state.isLogin?Object(i.jsx)(g.a,{overlay:Object(i.jsx)(x.a,{children:Object(i.jsx)(x.a.Item,{children:Object(i.jsx)("a",{target:"_blank",rel:"noopener noreferrer",onClick:S,children:"\u6ce8\u9500"})})}),placement:"bottomLeft",children:Object(i.jsx)("a",{style:{color:"#eee"},children:this.state.userName})}):Object(i.jsx)(p.a,{type:"ghost",onClick:D,children:"\u70b9\u51fb\u767b\u5f55"})})]})}}]),n}(a.PureComponent),P=n(32),R=n.n(P),L=n(363);function N(){return Object(a.useEffect)((function(){T()}),[""]),Object(i.jsxs)(R.a,{style:{height:"100%",background:"rgb(255,255,255)"},children:[Object(i.jsx)(_,{title:""}),Object(i.jsx)(P.Content,{style:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#000"},children:Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%",position:"relative"},className:"bg",children:Object(i.jsxs)("section",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Object(i.jsx)("div",{className:"logo-login",style:{width:"300px",height:"100px"}}),Object(i.jsx)(p.a,{type:"ghost",size:"large",icon:Object(i.jsx)(L.a,{}),onClick:function(){D().catch((function(e){return b.b.error(e.message)}))},children:"\u70b9\u51fb\u767b\u5f55"})]})})})]})}var F=n(361),M=n(362),A=n(358),U=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={topics:[],isBusy:!0},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;O.a.get("/api/rpaexaminfo/getuserrpaexamlist",{params:{pageIndex:1,pageSize:1e3}}).then((function(t){var n,i,a;return e.setState({topics:null!==(n=null===(i=t.data)||void 0===i||null===(a=i.response)||void 0===a?void 0:a.data)&&void 0!==n?n:[],isBusy:!1})})).catch((function(e){b.b.error("\u83b7\u53d6\u5217\u8868\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u5237\u65b0\u91cd\u8bd5! (".concat(e.message,")"))}))}},{key:"renderList",value:function(){var e=[{title:" ",width:"4%",render:function(e,t,n){return Object(i.jsx)("span",{children:n+1})}},{title:"\u9898\u76ee\u540d\u79f0",dataIndex:"Title",key:"Title",render:function(e){return Object(i.jsx)("span",{children:e})}},{title:"\u662f\u5426\u5df2\u901a\u8fc7",dataIndex:"IsPassed",key:"IsPassed",render:function(e){return e?Object(i.jsx)(F.a,{color:"green",children:"\u5df2\u901a\u8fc7"}):Object(i.jsx)(F.a,{color:"red",children:"\u672a\u901a\u8fc7"})}},{title:"\u8017\u65f6",dataIndex:"TimeCost",key:"TimeCost",render:function(e,t){var n;return t.IsPassed?Object(i.jsxs)("span",{children:[(null!==(n=t.TimeCost)&&void 0!==n?n:0)/1e3,"s"]}):"--"}},{title:"\u6392\u540d",dataIndex:"Rank",key:"Rank",render:function(e,t){return t.IsPassed?Object(i.jsx)("span",{children:e}):"--"}},{title:"",dataIndex:"Id",key:"Id",render:function(e){return Object(i.jsx)(M.b,{size:"middle",children:Object(i.jsx)(p.a,{type:"primary",onClick:function(){window.location.href="/main/topicdetail/".concat(e)},children:Object(i.jsx)("span",{children:"\u8fdb\u5165\u6d4b\u8bd5"})})})}}];return Object(i.jsx)(A.a,{style:{width:"80%"},columns:e,dataSource:this.state.topics,loading:this.state.isBusy})}},{key:"render",value:function(){return Object(i.jsxs)(R.a,{style:{height:"100%",background:"rgb(255,255,255)"},children:[Object(i.jsx)(_,{title:"\u9898\u76ee\u5217\u8868"}),Object(i.jsx)(P.Content,{style:{display:"flex",justifyContent:"center"},children:this.renderList()})]})}}]),n}(s.a.PureComponent),H=n(141),z=n(360),E=n(359),J=n(357),V=n(100),W=n(183),q=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={isTestBegin:!1,showDetail:!0,topicDetail:{},isBusy:!0},e.frameRef=s.a.createRef(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t,n,i,a=this,s=null===(e=this.props)||void 0===e||null===(t=e.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id;""!==s&&void 0!==s?(this.setState({id:s}),(i=s,O.a.get("/api/rpaexaminfo/getrpaexamdetailinfo",{params:{testId:i}})).then((function(e){var t=e.data.response,n=t.URL.split("/")[1];a.setState({topicDetail:Object(H.a)(Object(H.a)({},t),{},{Name:n}),isBusy:!1})})).catch((function(e){b.b.error("\u8bfb\u53d6\u5f53\u524d\u6d4b\u8bd5\u4fe1\u606f\u9519\u8bef\uff0c\u8bf7\u9000\u51fa\u540e\u91cd\u8bd5\uff01(".concat(e.message,")"))}))):b.b.error("\u65e0\u6cd5\u8bfb\u53d6\u5f53\u524d\u8003\u8bd5\u4fe1\u606fID\uff0c\u8bf7\u9000\u51fa\u540e\u91cd\u8bd5!")}},{key:"onBeginTestBtn",value:function(){var e,t,n=this;(t=null!==(e=this.state.topicDetail.Id)&&void 0!==e?e:"",O.a.post("/api/rpachallenge/challengestart?testId=".concat(t),{testId:t})).then((function(){n.setState({isTestBegin:!0,showDetail:!1})})).catch((function(e){b.b.error("\u65e0\u6cd5\u542f\u52a8\u6d4b\u8bd5\uff0c\u8bf7\u9000\u51fa\u540e\u91cd\u8bd5\uff01(".concat(e.message,")"))}))}},{key:"onSwitchViewBtn",value:function(){this.setState({showDetail:!this.state.showDetail})}},{key:"onSubmitBtn",value:function(){var e=this;z.a.confirm({title:"\u8bf7\u786e\u8ba4",icon:Object(i.jsx)(V.a,{}),content:"\u786e\u8ba4\u63d0\u4ea4\u672c\u6b21\u6d4b\u8bd5\u7ed3\u679c?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){try{var t;(null===(t=e.frameRef.current)||void 0===t?void 0:t.contentWindow).getExamResult().then((function(t){var n,a;console&&console.log(t),(a={data:t,appName:e.state.topicDetail.Name||"",testId:null!==(n=e.state.topicDetail.Id)&&void 0!==n?n:""},O.a.post("/submit",a)).then((function(e){var t,n;e.data.isPassed?z.a.success({title:"\u901a\u8fc7\u6d4b\u8bd5",content:Object(i.jsx)("div",{children:Object(i.jsxs)("div",{children:["\u7528\u65f6\uff1a",Object(i.jsx)("span",{style:{fontWeight:"bold"},children:null!==(t=e.data.timeout)&&void 0!==t?t:"--"})," ms"]})}),onOk:function(){window.location.href="/main/index.html"}}):b.b.error(null!==(n=e.data.result)&&void 0!==n?n:"\u672a\u901a\u8fc7\u6821\u9a8c\uff0c\u8bf7\u68c0\u67e5\u4fee\u6539\u540e\u91cd\u65b0\u63d0\u4ea4\uff01")})).catch((function(e){console&&console.error(e),b.b.error(e.message)}))})).catch((function(e){console&&console.error(e),b.b.error(e)}))}catch(n){console&&console.error(JSON.stringify(n.message)),b.b.error(JSON.stringify(n.message))}}})}},{key:"renderTestPage",value:function(){var e,t;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(P.Content,{style:{position:"relative"},children:[Object(i.jsx)("iframe",{src:this.state.topicDetail.URL,height:"100%",width:"100%",ref:this.frameRef}),Object(i.jsxs)("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,visibility:this.state.showDetail?"initial":"hidden",background:"#fff"},children:[Object(i.jsx)(E.a,{title:(null===(e=this.state.topicDetail)||void 0===e?void 0:e.Title)+(null!==(t=this.state.topicDetail.Id)&&void 0!==t?t:"")}),Object(i.jsx)(J.a,{style:{margin:"0 0 10px 0"}}),Object(i.jsx)("div",{style:{padding:"0 10px 20px 10px"},dangerouslySetInnerHTML:{__html:this.state.topicDetail.IntroductionHTMLStr||""}})]})]})})}},{key:"renderDetailPage",value:function(){var e;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(P.Content,{children:[Object(i.jsx)(E.a,{title:null===(e=this.state.topicDetail)||void 0===e?void 0:e.Title}),Object(i.jsx)(J.a,{style:{margin:"0 0 10px 0"}}),Object(i.jsx)("div",{style:{padding:"0 10px 20px 10px"},dangerouslySetInnerHTML:{__html:this.state.topicDetail.IntroductionHTMLStr||""}})]})})}},{key:"renderFooder",value:function(){return this.state.isTestBegin?Object(i.jsxs)(P.Footer,{style:{padding:"8px 50px 5px 50px"},children:[Object(i.jsx)(p.a,{style:{float:"right"},type:"primary",danger:!0,onClick:this.onSubmitBtn.bind(this),children:"\u63d0\u4ea4"}),Object(i.jsx)(p.a,{style:{float:"right",marginLeft:10,marginRight:10},type:"primary",onClick:this.onSwitchViewBtn.bind(this),children:"\u5207\u6362\u89c6\u56fe"})]}):Object(i.jsx)(P.Footer,{style:{padding:"8px 50px 5px 50px"},children:Object(i.jsx)(p.a,{style:{float:"right"},type:"primary",onClick:this.onBeginTestBtn.bind(this),children:"\u5f00\u59cb\u6d4b\u8bd5"})})}},{key:"render",value:function(){var e;return Object(i.jsxs)(f.a,{style:{height:"100%",width:"100%",background:"rgb(255,255,255)"},children:[Object(i.jsx)(_,{title:this.state.isTestBegin&&!this.state.showDetail?null!==(e=this.state.topicDetail.Title)&&void 0!==e?e:"":"\u8be6\u60c5"}),this.state.isBusy&&Object(i.jsx)(W.a,{tip:"\u52a0\u8f7d\u4e2d..."}),this.state.isTestBegin?this.renderTestPage():this.renderDetailPage(),this.renderFooder()]})}}]),n}(a.PureComponent);function G(){return Object(a.useEffect)((function(){C.signinRedirectCallback().then((function(e){return e})).then((function(e){window.location.href="/main/index.html"})).catch((function(e){return b.b.error(e.message)}))})),Object(i.jsx)(R.a,{style:{height:"100%",background:"rgb(255,255,255)"},children:Object(i.jsxs)(W.a,{tip:"\u6b63\u5728\u767b\u5f55...",style:{height:"100vh"},children:[Object(i.jsx)(_,{title:""}),Object(i.jsx)(P.Content,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"95vh"},children:Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%",position:"relative"},className:"bg",children:Object(i.jsx)("section",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(i.jsx)("div",{className:"logo-login",style:{width:"400px",height:"150px",marginRight:10}})})})})]})})}var K,Q=Object(j.a)(),X=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"setTitle",value:function(e){this.setState({title:e})}},{key:"render",value:function(){return Object(i.jsxs)(u.b,{history:Q,children:[Object(i.jsx)(u.a,{path:"/main",exact:!0,component:U}),Object(i.jsx)(u.a,{path:"/main/index.html",exact:!0,component:U}),Object(i.jsx)(u.a,{path:"/main/login",component:N}),Object(i.jsx)(u.a,{path:"/main/login_success",component:G}),Object(i.jsx)(u.a,{path:"/main/topicdetail/:id",component:q})]})}}]),n}(s.a.Component),Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,364)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),s(e),c(e)}))};K=function(){r.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(X,{})}),document.getElementById("root"))},window.location.pathname.indexOf("/main/login")>=0||window.location.pathname.indexOf("/main/login_success")>=0?K&&K():C.getUser().then((function(e){e?I="Bearer ".concat(e.access_token):window.location.href="/main/login",K&&K()})),Y()}},[[354,1,2]]]);
//# sourceMappingURL=main.361e5e92.chunk.js.map